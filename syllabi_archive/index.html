<!DOCTYPE html>

<html lang="en">
    <head>
        <title>CSCI 1100 - Syllabi Archive</title>
        <meta name="description" content="Access historical syllabi for CSCI 1100 - Using Information Technology by semester.">
        <meta name="author" content="Ryan Haas">
        <meta name="keywords" content="csci, 1100, syllabi, archive, using, information, technology, uit, etsu, east, tennessee, computing, university">
        <meta name="robots" content="noarchive">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        
        <link type="text/css" rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link type="text/css" rel="stylesheet" href="https://csci-1100.github.io/class_resources_public/uit_website/style.css">

        <script type="application/javascript"
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            crossorigin="anonymous"></script>
        <script type="application/javascript"
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
        <script
            type="application/javascript"
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
            integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
            crossorigin="anonymous"></script>
    </head>
    
    <body class="body-bg-img-light">
        <div class="container-lg br-8 mt-3" style="clear: both;">
            <div class="text-center text-white p-1">
                <h1 class="text-white" style="margin-bottom: 0;" id="title">
                    <i class="bi bi-file-earmark-word fs-650 text-putty-yellow"></i>
                    &nbsp;CSCI 1100 Syllabi Archive
                </h1>
                <h3 class="ff-script text-putty-yellow">Historical Course Syllabi</h3>
            </div>

            <div class="alert alert-info" role="alert">
                <div>
                    <span class="alert-heading fs-450">Syllabi Archive</span>
                    <p>Access historical syllabi for CSCI 1100 - Using Information Technology organized by semester.</p>
                </div>
                <div class="mt-4 p-2">
                    <a style="float:right;margin-top: -16px;" href="#syllabi-list"><button class="bttn-putty-yellow-sm">View Syllabi&ensp;<i class="bi bi-arrow-down-square-fill"></i></button></a>
                </div>
            </div>

            <div class="row mt-2 ml-1 mb-2 mr-1">
                <div class="col-sm center text-white fs-200 mt-5 pr-3 pl-5">
                    <i class="bi bi-pen-fill"></i>&nbsp;Ryan Haas, Asst. Director of Using Information Technology
                    <br>
                    <div class="mt-2"><i class="bi bi-archive"></i>&nbsp;CSCI 1100 Syllabi Archive</div>
                    <br>
                </div>
                <div class="col-sm text-white text-right mt-5 pb-3 pl-3">
                    <a target="_blank" href="https://www.etsu.edu/cbat/computing/csci_1100_-_using_information_technology_uit/index.html"><button class="bttn-putty-yellow-sm">
                        <i class="bi bi-arrow-90deg-left"></i>&ensp;Back to Main Site
                    </button></a>
                    <br>
                </div>
            </div>

            <nav class="tab show-when-small fs-300 br-8 mb-2 shadow" style="z-index: 10;">
                <div class="d-flex justify-content-center">
                    <button onclick="scrollToSection('syllabi-list')">
                        <i class="bi bi-folder-fill fs-450"></i>
                        Syllabi
                    </button>
                    <button onclick="scrollToSection('about')">
                        <i class="bi bi-info-circle-fill fs-450"></i>
                        About
                    </button>
                </div>
            </nav>
        </div>

        <div class="container-lg br-8 mb-3 pt-3 bg-primary-blue border-dotted-putty-yellow" style="clear: both;" id="main" role="main">
            <div class="tab hide-when-small fs-300 br-8 mb-2 shadow" style="z-index: 10; margin-top: -130px; margin-left: -260px; position: fixed;">
                <div class="text-center">
                    <span class="text-putty-yellow fs-450 ff-sans-bold text-center">Navigation<hr color="#9A97D4"></span>
                </div>
                <button onclick="window.scrollTo({ top:0, left:0, behavior: 'smooth' })">
                    <i class="bi bi-arrow-90deg-up"></i>
                    &ensp;<span class="text-putty-yellow">Scroll to top</span>
                </button>
                <br>
                <button onclick="scrollToSection('syllabi-list')">
                    <i class="bi bi-folder-fill fs-450"></i>
                    &ensp;Syllabi
                </button>
                <br>
                <button onclick="scrollToSection('about')">
                    <i class="bi bi-info-circle-fill fs-450"></i>
                    &ensp;About
                </button>
                <br>
                <button onclick="window.scrollTo({ top: document.body.scrollHeight, left: 0, behavior: 'smooth' });">
                    <i class="bi bi-arrow-90deg-down"></i>
                    &ensp;<span class="text-putty-yellow">Scroll to bottom</span>
                </button>
            </div>

            <div class="bg-light mb-4 br-8">
                <div class="row card-row pt-3" id="syllabi-list">
                    <div class="col-xl br-8">
                        <div class="title-container-primary-blue">
                            <h2 class="text-putty-yellow">Available Syllabi</h2>
                        </div>
                        <div class="scrollbox-wrapper bg-white fs-400">
                            <p class="text-center mb-4">
                                Click on any semester to download the corresponding syllabus.
                            </p>
                            <div id="syllabi-container">
                                <!-- Syllabi dynamically generated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row card-row br-8 pt-3" id="about">
                    <div class="col-md">
                        <div class="title-container-primary-blue">
                            <h2 class="text-putty-yellow">About This Archive</h2>
                        </div>
                        <div class="scrollbox-wrapper bg-white fs-400">
                            <p class="mt-2">
                                This archive contains past syllabi for CSCI 1100 - Using Information Technology,
                                since Fall 2024, which marked the beginning of our recent major course redesign.
                            </p>
                            <p class="mt-2">
                                <span class="ff-sans-bold">Note:</span> Students currently enrolled in CSCI 1100 should always refer to the 
                                syllabus provided by their current instructor, as policies and requirements may vary by section 
                                and semester.
                            </p>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="title-container-primary-blue">
                            <h2 class="text-putty-yellow">Questions?</h2>
                        </div>
                        <div class="scrollbox-wrapper bg-white fs-400">
                            <p>
                                If you need a specific syllabus that's not available here, or have questions about 
                                course requirements from a particular semester,
                                <a href="mailto:csci1100@etsu.edu?subject=CSCI 1100 - Requesting Syllabus">contact us</a>,
                                providing the semester and the modality (in-person or online) of the syllabus you
                                are requesting.
                            </p>
                            <div class="text-center mt-3">
                                <a class="text-primary-blue" href="mailto:csci1100@etsu.edu">
                                    <button class="bttn-primary-sm">
                                        <i class="bi bi-envelope-at fs-450"></i>&ensp;csci1100@etsu.edu
                                    </button>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function scrollToSection(ID) {
                document.getElementById(ID).scrollIntoView({behavior: 'smooth'});
            }

             // Function to convert semester code to readable name
            function getSemesterName(code) {
                const year = code.substring(0, 4);
                const semesterCode = code.substring(4);
                
                let semesterName;
                switch(semesterCode) {
                    case '10': semesterName = 'Spring'; break;
                    case '50': semesterName = 'Summer'; break;
                    case '80': semesterName = 'Fall'; break;
                    default: semesterName = 'Unknown'; break;
                }
                
                return `${semesterName} ${year}`;
            }

            // Function to clean filename for display
            function cleanFileName(filename) {
                return filename.replace('.docx', '');
            }

            // Function to generate syllabi HTML
            function generateSyllabiHTML(result) {
                const container = document.getElementById('syllabi-container');
                
                // Sort semesters in descending order (most recent first)
                const sortedSemesters = Object.keys(result).sort().reverse();
                
                let html = '';
                let i = 0;
                
                sortedSemesters.forEach(semester => {
                    const semesterName = getSemesterName(semester);
                    const files = result[semester];
                    
                    i++;

                    if (i%2 == 1)
                        html += `<div class="gridbox-2">`;

                    html += `
                        <div class="border-dotted-primary-blue br-8 p-3 bg-light">
                            <h3 class="text-primary-blue text-left">${semesterName}</h3>
                            <div class="text-left">
                                    
                    `;
                    
                    files.forEach(file => {
                        const cleanName = cleanFileName(file);
                        const filePath = `./${semester}/${file}`;
                        
                        html += `
                                <a target="_blank" href="${filePath}">
                                    <div class="mb-2">
                                        ${cleanName} &ensp;<i class="bi bi-download"></i>
                                    </div>
                                </a>
                        `;
                    });
                    
                    html += `
                            </div>
                        </div>
                    `;

                    if (i%2 == 0)
                        html += `</div>`;
                });

                // If the total count of syllabi is odd (i is odd from last iteration), need to add a second div to the last gridbox and close it
                if (i%2 == 1) {
                    console.log("Add the extra div to last")
                    html += `
                        <div class="p-3">&nbsp;</div>
                    </div>
                    `
                }
                else
                    console.log("i is equal to " + i);
                
                container.innerHTML = html;
            }

            // Scrape syllabi using GitHub's API
            async function scrapeSyllabiArchiveAPI() {
                const apiBase = 'https://api.github.com/repos/CSCI-1100/class_resources_public/contents/syllabi_archive';
                const result = {};
                
                try {
                    // Get the main directory contents
                    const response = await fetch(apiBase);
                    const contents = await response.json();
                    
                    // Filter for directories that start with "202"
                    const semesterFolders = contents.filter(item => 
                        item.type === 'dir' && item.name.startsWith('202')
                    );
                    
                    console.log('Found semester folders:', semesterFolders.map(f => f.name));
                    
                    // Process each semester folder
                    for (const folder of semesterFolders) {
                        console.log(`Processing folder: ${folder.name}`);
                        
                        try {
                            const folderResponse = await fetch(`${apiBase}/${folder.name}`);
                            const folderContents = await folderResponse.json();
                            
                            // Extract filenames
                            const filenames = folderContents
                                .filter(item => item.type === 'file')
                                .map(item => item.name);
                            
                            result[folder.name] = filenames;
                            
                            // Add a small delay to be respectful to the API
                            await new Promise(resolve => setTimeout(resolve, 300));
                            
                        } catch (error) {
                            console.error(`Error fetching contents of ${folder.name}:`, error);
                            result[folder.name] = [];
                        }
                    }
                    
                } catch (error) {
                    console.error('Error fetching main directory from API:', error);
                }
                
                return result;
            }

            console.log('Starting syllabi archive scraping...');

            scrapeSyllabiArchiveAPI().then(result => {
                console.log('Final result (API method):', result);
                console.log('JSON output:', JSON.stringify(result, null, 2));

                generateSyllabiHTML(result);
            });
        </script>
    </body>
</html>